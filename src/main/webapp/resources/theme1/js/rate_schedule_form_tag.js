function calculateFactorialRateForPayRateBasedRS(f,h,e,a,c){if(a==3){stringIdFieldName="rateCategoryIds"}else{stringIdFieldName="baseRateCategoryIds"}var g=getChildSequencesForRS(h,stringIdFieldName,c);for(var d=0;d<g.length;d++){var b;if(a==3){b=doFactorialRateCalculationForPayRateBasedRS(f,g[d],e);if(!b){calculatePayRateBasedRS(f,g[d],e,h,a,c)}}else{b=doFactorialRateCalculationForPayRateBasedRS(f,e,g[d]);if(!b){calculatePayRateBasedRS(f,e,g[d],h,a,c)}}}showcommitedSpend(f,null,c,a)}function doFactorialRateCalculationForPayRateBasedRS(b,k,c){if(c<0){return true}var p=document.getElementById("minPayRates"+c);var m=document.getElementById("maxPayRates"+c);var l=document.getElementById("factorialMinRate"+c);var d=document.getElementById("factorialMaxRate"+c);var g=document.getElementById("billRateDisplay"+c);var o,i,f;o=0;var e=document.getElementById("minPayRates"+k);if(e!=null){roundOffValues(e,2);o=getNumberFromLocaleNumber(e.value);highlightErrorField(e)}else{if(e==null){return false}}var n=document.getElementById("rateFactors"+c);if(n!=null){roundOffValues(n,3);i=getNumberFromLocaleNumber(n.value);highlightErrorField(n)}else{i=0}f=0;var h=document.getElementById("maxRates"+k);if(h!=null){f=getNumberFromLocaleNumber(h.value)}else{if(h==null){return false}}var q=i*o;var j=i*f;var a=j;q=getLocaleNumberFromNumber(q,2);j=getLocaleNumberFromNumber(j,2);if(l!=null){l.innerText=q}if(d!=null){d.innerText=j}if(p!=null){p.value=q}if(m!=null){m.value=j}if(g!=null){g.innerText=getLocaleNumberFromNumber(a,2)}if(h!=null||e!=null){return true}}function calculatePayRateBasedRS(b,i,d,h,c,e){if(d<0){return}var l=document.getElementById("minRates"+i);var f=document.getElementById("maxRates"+i);var a,k;a=0;if(l!=null){a=getNumberFromLocaleNumber(l.value)}k=0;if(f!=null){k=getNumberFromLocaleNumber(f.value)}var j=document.getElementById("rateFactors"+d);if(j!=null){rateFactor=getNumberFromLocaleNumber(j.value);highlightErrorField(j)}else{rateFactor=0}a=a*rateFactor;k=k*rateFactor;var g=$("form[name='jobPostingForm']").serialize();g=g+"&action=recalculate_payrate";g=g+"&rate_sequence="+d;g=g+"&parent_sequence="+i;g=g+"&minPayRate="+a;g=g+"&maxPayRate="+k;g=g+"&rateCategoryId="+h;g=g+"&rateUnit="+e;g=g+"&rateType="+c;g=g+"&rateFactor="+rateFactor;$.post("/buyer/job_posting_form.do",g,function(m){updatePayRateBasedSection2(m)})}function updatePayRateBasedSection2(json){json=trim(json);var data=eval("("+json+")");var sequence=data.sequence;var parentSequence=data.parentSequence;var targetMinBillRate=data.minBillRate;var targetMaxBillRate=data.maxBillRate;var rateCategoryId=data.rateCategoryId;var rateUnit=data.rateUnit;var rateType=data.rateType;var targetMaxPayRatesobj=data.maxPayRate;var targetFactorRateobj=data.rateFactor;targetMinBillRate=getLocaleNumberFromNumber(targetMinBillRate,2);targetMaxBillRate=getLocaleNumberFromNumber(targetMaxBillRate,2);targetMaxPayRatesobj=getLocaleNumberFromNumber(targetMaxPayRatesobj,2);targetFactorRateobj=getLocaleNumberFromNumber(targetFactorRateobj,3);var targetMaxPayRatesDisplayobj=document.getElementById("maxRates"+sequence);var targetFactorRateDisplayobj=document.getElementById("rateFactors"+sequence);if(targetMaxPayRatesDisplayobj==null){targetMaxPayRatesDisplayobj=document.getElementById("maxRates"+sequence)}if(targetMaxPayRatesDisplayobj!=null){targetMaxPayRatesDisplayobj.value=targetMaxPayRatesobj}if(targetFactorRateDisplayobj==null){targetFactorRateDisplayobj=document.getElementById("rateFactors"+sequence).value}if(targetFactorRateDisplayobj!=null){targetFactorRateDisplayobj.value=getLocaleNumberFromNumber(document.getElementById("rateFactors"+sequence).value,3)}var targetMinBillRateDisplayobj=document.getElementById("minbillRateDisplay"+sequence);if(targetMinBillRateDisplayobj==null){targetMinBillRateDisplayobj=document.getElementById("factorialMinRate"+sequence)}if(targetMinBillRateDisplayobj!=null){targetMinBillRateDisplayobj.innerText=targetMinBillRate}var targetMaxBillRateDisplayobj=document.getElementById("maxbillRateDisplay"+sequence);if(targetMaxBillRateDisplayobj==null){targetMaxBillRateDisplayobj=document.getElementById("factorialMaxRate"+sequence)}if(targetMaxBillRateDisplayobj!=null){targetMaxBillRateDisplayobj.innerText=targetMaxBillRate}var targetBillRateDisplayobj=document.getElementById("billRateDisplay"+sequence);if(targetBillRateDisplayobj!=null){targetBillRateDisplayobj.innerText=targetMaxBillRate}if(sequence==parentSequence){calculateFactorialRateForPayRateBasedRS(event,rateCategoryId,sequence,rateType,rateUnit)}}function getChildSequencesForRS(b,e,a){var g=document.getElementsByName(e);var d=document.getElementsByName("rateUom");var f=new Array();for(var c=0;c<g.length;c++){if(g[c].value==b&&(d[c].value==a)){f.push(c)}}return f}function doPayRateBasedCalculationForPayRateBasedRS(b,g,c,h,d){if(c==5||c==18){if(g<0){return}var j=document.getElementById("minRates"+g);var e=document.getElementById("maxRates"+g);var a,i;a=0;if(j!=null){roundOffValues(j,2);a=getNumberFromLocaleNumber(j.value)}i=0;if(e!=null){i=getNumberFromLocaleNumber(e.value)}var f=$("form[name='jobPostingForm']").serialize();f=f+"&action=recalculate_payrate";f=f+"&rate_sequence="+g;f=f+"&parent_sequence="+g;f=f+"&minPayRate="+a;f=f+"&maxPayRate="+i;f=f+"&rateCategoryId="+h;f=f+"&rateUnit="+d;f=f+"&rateType="+c;$.post("/buyer/job_posting_form.do",f,function(k){updatePayRateBasedSection2(k)})}};