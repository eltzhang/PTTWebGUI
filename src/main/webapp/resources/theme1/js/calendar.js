var calDateFormat=new String("YYYY-MM-DD");var dayIndex;var monthIndex;var yearIndex;var calDate;var global_field_name;topBackground="#ffffff";bottomBackground="#ffffff";bottomBorder=false;tableBorder=0;yearsBack=3;yearsForward=6;var calWinWidth=17;var calWinHeight=245;var calYOffset=120;var calXMax=1024;var calYMax=1280;selectedLanguage=document.userLanguage;buildCalParts();invokeCalendarValueCallback=function(c,b,d){var a=c.getAttribute("gridInstanceName");if(typeof a!=="undefined"&&typeof window[a]!=="undefined"&&typeof window[a].setJqxGridCellValueCallback!=="undefined"&&window[a].setJqxGridCellValueCallback!=null){window[a].setJqxGridCellValueCallback(b,c.id,d)}};function showCal(b,c,a){if(a!=null&&a.length>0){calDateFormat=a.toUpperCase()}setDateField(b);getIframeObj();calendarIframe.style.left=getCalXPosition(c)+"px";calendarIframe.style.top=getCalYPosition(c)+"px";calendarIframe.style.display="block";writeCalendar()}function getCalXPosition(e){var f,a;var c;if(isIE){f=e.srcElement;var a=f.offsetLeft;var d=f.offsetParent;while(d!=document.body&&d!=null){a+=d.offsetLeft;d=d.offsetParent}}else{f=$(e.target);if(isRtl()){var b=18;a=f.offset().left-($(".calendarPan").outerWidth()-b)}else{a=f.offset().left}}a=a-calWinWidth+17;c=Math.max(a,0);c=Math.round(c);return(c*1)}function getCalYPosition(c){var d,e;calYMax=$("body,html").attr("clientHeight");if(isIE){d=c.srcElement;e=d.offsetTop;var b=d.offsetParent;while(b!=document.body&&b!=null){e+=b.offsetTop;b=b.offsetParent}}else{d=$(c.target);e=d.offset().top}e+=25;var a=Math.max(e,0);if(e+calWinHeight-(isWebKit?$("body").scrollTop():$("body,html").scrollTop())*1>calYMax){a=calYMax-calWinHeight-3+(isWebKit?$("body").scrollTop():$("body,html").scrollTop())}return(a)}function setDateField(a){calDateField=a;inDate=a.value;setInitialDate();calDocTop=buildTopCalFrame();calDocBottom=buildBottomCalFrame()}function setInitialDate(){var d;var e;var c;var a;calDate=new Date();if(calDateFormat.indexOf("/")>=0){tokens=calDateFormat.split("/")}else{if(calDateFormat.indexOf("-")>=0){tokens=calDateFormat.split("-")}}for(var b=0;b<3;b++){if(tokens[b]=="YYYY"||tokens[b]=="YY"){yearIndex=b}else{if(tokens[b]=="MM"){monthIndex=b}else{if(tokens[b]=="DD"){dayIndex=b}}}}if(inDate.indexOf("/")>=0){tokens=inDate.split("/")}else{if(inDate.indexOf("-")>=0){tokens=inDate.split("-")}}e=tokens[yearIndex];c=tokens[monthIndex];a=tokens[dayIndex];if(!isNaN(e)&&!isNaN(c)&&!isNaN(a)){if(parseInt(e)<=9){e=e.replace("0","");calDate.setYear(parseInt("200"+parseInt(e)))}else{if(parseInt(e)<70){calDate.setYear(parseInt("20"+parseInt(e)))}else{if(parseInt(e)>=70&&parseInt(e)<=99){calDate.setYear(parseInt("19"+parseInt(e)))}else{if(parseInt(e)<=999){calDate.setYear(new Date().getFullYear())}else{if(parseInt(e)<=9999){calDate.setYear(e)}else{calDate.setYear(new Date().getFullYear())}}}}}calDate.setDate(a);calDate.setMonth(c-1)}else{calDate=new Date()}calDay=calDate.getDate();firstYear=calDate.getFullYear()-yearsBack;lastYear=calDate.getFullYear()+yearsForward;calDate.setDate(1)}function buildTopCalFrame(){var a='<div style="padding:0; margin:0;background-color:'+topBackground+";\"><form NAME='calControl' onSubmit='return false;'><center><table CELLPADDING=0 CELLSPACING=1 BORDER=0 width=100% class=calendarHeader><tr><td COLSPAN=6 ALIGN=left valign=middle>"+getMonthSelect()+"</td><td ALIGN=right valign=middle>"+getYearSelect()+"</td></tr><tr><td COLSPAN=7 class=\"navigation\" align=center>\n<table CELLPADDING=0 CELLSPACING=0 BORDER=0 >\n<tr><td ALIGN=LEFT><span role='link' onClick='setPreviousYear()' class='setPreviousYear'>&nbsp;</span></td><td><span role='link' onClick='setPreviousMonth()' class='setPreviousMonth'>&nbsp;</span></td>\n<td ALIGN=CENTER><INPUT TYPE=BUTTON CLASS='formButton' NAME='Today' value=\""+getMessage("label.today")+"\" onClick='setToday()' style='height: 18px;margin: 1px;font:bold 13px arial;min-width: 60px; max-width: 100px;'></td><td ALIGN=RIGHT><span role='link' onClick='setNextMonth()' class='setNextMonth'>&nbsp;</span></td><td><span role='link' onClick='setNextYear()' class='setNextYear'>&nbsp;</span></td></tr></table>\n</td></tr></table></CENTER></FORM></DIV>";return a}function buildBottomCalFrame(d){var p=calendarBegin;month=calDate.getMonth();year=calDate.getFullYear();day=calDay;var j=0;var q=getDaysInMonth();if(day>q){day=q}var c=new Date(year,month,1);var h=1;if(typeof(_WEEK_START_DAY)!="undefined"){h=_WEEK_START_DAY}var m=c.getDay()-(h-1);if(m<0){m+=7}q+=m;var o=0;var e=7-h;var l=0;if(h!=1){l=8-h}var r="<td class='data'><div class='calendarWeekend'>&nbsp;</div></td>\n";for(var j=0;j<m;j++){if(j==e||j==l){p+=r}else{p+=blankCell}o++}var n=0;var k="weekday";if(!inDate){var g=new Date()}else{var f=calDate;var g=parseDate(inDate,calDateFormat);calDate=f}for(var j=m;j<q;j++){var b="&nbsp;";if(j-m+1<10){padding="&nbsp;&nbsp;"}else{padding="&nbsp;"}n=j-m+1;if(n==day&&(month==g.getMonth()||(month==calDate.getMonth()&&d))&&(year==g.getFullYear()||(year==calDate.getFullYear()&&d))){k="focusDay"}else{k="weekDay"}var a="";if((o==e||(o%7)==e)||(o==l||(o%7)==l)){a="calendarWeekend"}p+="<td class='data'><a class='"+k+" "+a+"' href='javascript:returnDate("+n+")'>"+padding+n+b+"</a></td>\n";o++;if(o%7==0){p+="</tr>\n<tr>\n"}}for(j=q;j<42;j++){if(j>=35&&(42-j)>=7){break}if((o==e||(o%7)==e)||(o==l||(o%7)==l)){p+=r}else{p+=blankCell}o++;if(o%7==0){p+="</tr>";if(j<41){p+="<tr>"}}}p+=calendarEnd;return p}function writeCalendar(){calDocTop=buildTopCalFrame();$("#topCalFrame").html(calDocTop);writeBottomCalendar()}function writeBottomCalendar(a){if(typeof a!="undefined"){calDocBottom=buildBottomCalFrame(true)}else{calDocBottom=buildBottomCalFrame()}$("#bottomCalFrame").html(calDocBottom)}function setToday(){calDate=new Date();calDay=calDate.getDate();var a=document.getElementById("calendar1");$("#calendar1 select[name='month']").get(0).selectedIndex=calDate.getMonth();resetYearRange(calDate.getFullYear());$("#calendar1 select[name='year']").val(calDate.getFullYear());writeBottomCalendar(true)}function setCurrentMonth(){var a=$("#calendar1 select[name='month']").get(0).selectedIndex;calDate.setMonth(a);writeBottomCalendar()}function setCurrentYear(){var a=$("#calendar1 select[name='year']").get(0).selectedIndex;var b=$("#calendar1 select[name='year']").get(0).options[a].value;calDate.setFullYear(b);writeBottomCalendar()}function setPreviousYear(){var a=$("#calendar1 select[name='year']").get(0).value;a--;calDate.setFullYear(a);resetYearRange(a);$("#calendar1 select[name='year']").val(a);writeBottomCalendar()}function setPreviousMonth(){var a=$("#calendar1 select[name='year']").get(0).value;var b=$("#calendar1 select[name='month']").get(0).selectedIndex;if(b==0){b=11;setPreviousYear()}else{b--}calDate.setMonth(b);$("#calendar1 select[name='month']").get(0).selectedIndex=b;writeBottomCalendar()}function setNextMonth(){var a=$("#calendar1 select[name='year']").get(0).value;var b=$("#calendar1 select[name='month']").get(0).selectedIndex;if(b==11){b=0;setNextYear()}else{b++}calDate.setMonth(b);$("#calendar1 select[name='month']").get(0).selectedIndex=b;writeBottomCalendar()}function setNextYear(){var a=$("#calendar1 select[name='year']").get(0).value;a++;calDate.setFullYear(a);resetYearRange(a);$("#calendar1 select[name='year']").val(a);writeBottomCalendar()}function resetYearRange(a){if(a<firstYear||a>lastYear){firstYear=a-yearsBack;lastYear=a+yearsForward;rebuildYearRange(a)}}function rebuildYearRange(c){var b=calDate.getFullYear();var a=$("#calendar1 select[name=year]").children("option");a.each(function(d){$(this).val(firstYear+d);$(this).text(firstYear+d);if((firstYear+d)==b){$(this).attr("selected","selected")}})}function getDaysInMonth(){var c;var b=calDate.getMonth()+1;var a=calDate.getFullYear();if(b==1||b==3||b==5||b==7||b==8||b==10||b==12){c=31}else{if(b==4||b==6||b==9||b==11){c=30}else{if(b==2){if(isLeapYear(a)){c=29}else{c=28}}}}return(c)}function isLeapYear(a){if(((a%4)==0)&&((a%100)!=0)||((a%400)==0)){return(true)}else{return(false)}}function getMonthArray(){return new Array(getMessage("label.january"),getMessage("label.february"),getMessage("label.march"),getMessage("label.april"),getMessage("label.may"),getMessage("label.june"),getMessage("label.july"),getMessage("label.august"),getMessage("label.september"),getMessage("label.october"),getMessage("label.november"),getMessage("label.december"))}function getMonthSelect(){monthArray=getMonthArray();var a=calDate.getMonth();monthSelect="<SELECT NAME='month' onChange='setCurrentMonth()' style='width:90px;'>";for(i in monthArray){if(i<=11){if(i==a){monthSelect+="<OPTION SELECTED>"+monthArray[i]+"\n"}else{monthSelect+="<OPTION>"+monthArray[i]+"\n"}}}monthSelect+="</SELECT>";return monthSelect}function getYearSelect(){var b=firstYear;var a="<SELECT NAME='year' class='selectYear' onChange='setCurrentYear()' style='width:70px;'>";while(b<=lastYear){if(b==calDate.getFullYear()){a+='<OPTION VALUE="'+b+'" SELECTED>'+b+"\n"}else{a+='<OPTION VALUE="'+b+'">'+b+"\n"}b++}a+="</SELECT>";return a}function createWeekdayList(){var b=1;if(typeof(_WEEK_START_DAY)!="undefined"){b=_WEEK_START_DAY}if(typeof getMessage!="undefined"){weekdayListTemp=new Array(getMessage("label.sunday"),getMessage("label.monday"),getMessage("label.tuesday"),getMessage("label.wednesday"),getMessage("label.thursday"),getMessage("label.friday"),getMessage("label.saturday"));weekdayArrayTemp=new Array(getMessage("label.su"),getMessage("label.mo"),getMessage("label.tu"),getMessage("label.we"),getMessage("label.th"),getMessage("label.fr"),getMessage("label.sa"))}else{weekdayListTemp=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday");weekdayArrayTemp=new Array("Su","Mo","Tu","We","Th","Fr","Sa")}weekdayList=weekdayListTemp.slice(b-1).concat(weekdayListTemp.slice(0,b-1));weekdayArray=weekdayArrayTemp.slice(b-1).concat(weekdayArrayTemp.slice(0,b-1));var a="<tr>\n";for(i in weekdayArray){a+="<td class='heading'>"+weekdayArray[i]+"</td>\n"}a+="</tr>\n";return a}function buildCalParts(){weekdays=createWeekdayList();blankCell="<td class='data'><div class=\"blankCell\">&nbsp;</div></td>\n";calendarBegin='<div  style="background-color:'+bottomBackground+';margin:0; padding:0;">\n';if(isNav){calendarBegin+="<table CELLPADDING=0 CELLSPACING=0 BORDER="+tableBorder+" ALIGN=CENTER><tr><td>\n"}calendarBegin+="<table CELLPADDING=0 CELLSPACING=0 BORDER="+tableBorder+" ALIGN=CENTER class=calendarDates>"+weekdays+"<tr>\n";calendarEnd="";if(bottomBorder){calendarEnd+="<tr>\n</tr>"}if(isNav){calendarEnd+="</td></tr></table>"}calendarEnd+="</table>"}function jsReplace(d,e,c){var a="";if(!d){return""}if(d.indexOf(e)!=-1){var b=d.split(e);return(b.join(c))}else{return d}}function doNothing(){}function makeTwoDigit(a){var b=parseInt(a,10);if(b<10){return("0"+b)}else{return b}}function returnDate(o,b,f,a){if(a){calDate=new Date()}if(typeof(calDate)=="undefined"||calDate==null){calDate=new Date();calDay=calDate.getDate();monthArray=getMonthArray();calDateField=o}if((typeof(monthArray)=="undefined"||monthArray==null)){monthArray=getMonthArray();calDateField=o}if(typeof(o)=="undefined"){var o=calDay}if(typeof(o)=="number"){calDate.setDate(o)}var m=calDate.getDate();var j=calDate.getMonth()+1;var l=calDate.getFullYear();var p=monthArray[calDate.getMonth()];var k=p.substring(0,3);var g=weekdayList[calDate.getDay()];if(calDate.getDay()==0){var g=weekdayList[calDate.getDay()+6]}else{var g=weekdayList[calDate.getDay()-1]}var c=g.substring(0,3);outDate=typeof(b)=="undefined"?calDateFormat:b;if(calDateFormat.indexOf("DD")!=-1){m=makeTwoDigit(m);outDate=jsReplace(outDate,"DD",m)}else{if(calDateFormat.indexOf("dd")!=-1){outDate=jsReplace(outDate,"dd",m)}}if(calDateFormat.indexOf("MM")!=-1){j=makeTwoDigit(j);outDate=jsReplace(outDate,"MM",j)}else{if(calDateFormat.indexOf("mm")!=-1){outDate=jsReplace(outDate,"mm",j)}}if(calDateFormat.indexOf("YYYY")!=-1){outDate=jsReplace(outDate,"YYYY",l)}else{if(calDateFormat.indexOf("YY")!=-1){var d=""+l;var d=d.substring(2,4);outDate=jsReplace(outDate,"YY",d)}}calDateField.value=outDate;invokeCalendarValueCallback(calDateField,arguments.callee.name,outDate);if(!calDateField.disabled&&document.getElementById("bodyLoading")==null){calDateField.focus()}getIframeObj();hideCalendar();calDate=null;if(f==true){calDateField.fireEvent("onchange")}var n;n="dayOfWeek_"+global_field_name;if(document.getElementById(n)!=null){document.getElementById(n).innerHTML=g.toUpperCase()}try{$("#"+calDateField.id).trigger("change")}catch(h){}}function parseDate(g,a){a=a.toUpperCase();var f;var h;var e;var b;calDate=new Date();if(a.indexOf("/")>=0){tokens=a.split("/")}else{if(a.indexOf("-")>=0){tokens=a.split("-")}}for(var d=0;d<3;d++){if(tokens[d]=="YYYY"||tokens[d]=="YY"){yearIndex=d}else{if(tokens[d]=="MM"){monthIndex=d}else{if(tokens[d]=="DD"){dayIndex=d}}}}if(g.indexOf("/")>=0){tokens=g.split("/")}else{if(g.indexOf("-")>=0){tokens=g.split("-")}}h=tokens[yearIndex];e=tokens[monthIndex];b=tokens[dayIndex];h=h/1;e=e/1;b=b/1;if(!isNaN(h)&&!isNaN(e)&&!isNaN(b)){if(parseInt(h)<=9){calDate.setYear(parseInt("200"+parseInt(h)));h=parseInt("200"+parseInt(h))}else{if(parseInt(h)<70){calDate.setYear(parseInt("20"+parseInt(h)));h=parseInt("20"+parseInt(h))}else{if(parseInt(h)>=70&&parseInt(h)<=99){calDate.setYear(parseInt("19"+parseInt(h)));h=parseInt("19"+parseInt(h))}else{if(parseInt(h)<=999){calDate.setYear(new Date().getFullYear());h=new Date().getFullYear()}else{if(parseInt(h)<=9999){calDate.setYear(h)}else{calDate.setYear(new Date().getFullYear())}}}}}calDate.setDate(b);calDate.setMonth(e-1);calDate.setHours(0);calDate.setMinutes(0);calDate.setSeconds(0);calDate=new Date(e+"/"+b+"/"+h)}else{calDate=new Date()}var c=calDate;calDate=null;return c}function showDateValue(d,g,a){var b=g.getDate();var f=g.getMonth()+1;var c=g.getFullYear();outDate=a;if(calDateFormat.indexOf("DD")!=-1){b=makeTwoDigit(b);outDate=jsReplace(outDate,"DD",b)}else{if(calDateFormat.indexOf("dd")!=-1){outDate=jsReplace(outDate,"dd",b)}}if(calDateFormat.indexOf("MM")!=-1){f=makeTwoDigit(f);outDate=jsReplace(outDate,"MM",f)}else{if(calDateFormat.indexOf("mm")!=-1){outDate=jsReplace(outDate,"mm",f)}}if(calDateFormat.indexOf("YYYY")!=-1){outDate=jsReplace(outDate,"YYYY",c)}else{if(calDateFormat.indexOf("YY")!=-1){var e=""+c;var e=e.substring(2,4);outDate=jsReplace(outDate,"YY",e)}}d.value=outDate;invokeCalendarValueCallback(d,arguments.callee.name,outDate)}function calculateEndDateFull(c,b,d,a){b=b.toUpperCase();if(d==null||d.value==""||d.value==b){alert(START_DATE_EMPTY_ERROR_MSG);d.focus();return}if(c.duration==null||c.duration.value==""){alert(INVALID_DURATION_ERROR_MSG);c.duration.focus();return}else{if(c.duration.value.indexOf(decimalSeparator)>-1||isNaN(Number(c.duration.value))||parseInt(c.duration.value)<=0||c.duration.value.length!=($.trim(c.duration.value)).length){if(typeof(c.endDate)!=="undefined"){c.endDate.value=b}else{a=b}alert(INVALID_DURATION_ERROR_MSG);c.duration.focus();return}}duration=c.duration.value;durationType="";endDate=new Date();if(c.durationType){for(i=0;i<c.durationType.length;i++){if(c.durationType[i].checked=="1"){durationType=c.durationType[i].value;break}}}startDate=parseDate(d.value,b);if(startDate==null||startDate==""||startDate.length<5){alert(START_DATE_INVALID_ERROR_MSG);return}if(typeof(c.durationUnit)!="undefined"){if(c.durationUnit.value=="Weeks"){duration=(7*parseInt(c.duration.value));durationType="Days"}else{durationType=c.durationUnit.value}}if(durationType=="Months"){endDate=addMonths(startDate,duration)}else{if(durationType=="Days"){endDate=addDays(startDate,duration)}else{if(durationType=="Years"){endDate=addYears(startDate,duration)}}}a.style.color="#000000";showDateValue(a,endDate,b)}function calculateEndDate(c,a,b,d){if(b==null||b==""||b==undefined){b="startDate"}var e=document.getElementsByName(b);if(d==null||d==""||d==undefined){calculateEndDateFull(c,a,e[0],c.endDate)}else{calculateEndDateFull(c,a,e[0],d)}}function addMonths(b,a){b.setMonth(b.getMonth()+parseInt(a));b.setDate(b.getDate()-1);return b}function addDays(a,b){a.setDate(a.getDate()+(parseInt(b)-1));return a}function addYears(a,b){a.setYear(a.getFullYear()+parseInt(b));a.setDate(a.getDate()-1);return a}var calendarIframe;function toggleCalander(d,f,b,g,a,e){global_field_name=f.name;if(e!="undefined"&&e!=null){yearsBack=9;yearsForward=0}else{yearsBack=3;yearsForward=6}var c=g;if(f.disabled){return}getIframeObj();clearDateFromDateFormat(f,a);if(calendarIframe.style.display=="none"||getCalXPosition(d)!=calendarIframe.style.pixelLeft||getCalYPosition(d)!=calendarIframe.style.pixelTop){if(f.length!=1){for(i=0;i<f.length;i++){if(f[i].type=="text"){f=f[i];break}}}showCal(f,d,b)}else{returnDate()}}function toggleCalanderByFieldName(d,f,b,g,a,e){global_field_name=f;if(e!="undefined"&&e!=null){yearsBack=9;yearsForward=0}else{yearsBack=3;yearsForward=6}var c=document.getElementsByName(f);if(c[0].disabled){return}if(c!=null&&c.length==1){toggleCalander(d,c[0],b,g,a)}}function hideCalendar(){getIframeObj();calendarIframe.style.display="none";if((isIE7||isIE8)&&typeof(beforeUnload)!="undefined"){window.onbeforeunload=beforeUnload}}function clearDateFromDateFormatByFieldName(d,a){var c=document.getElementsByName(d);global_field_name=c[0].name;if(c!=null){for(var b=0;b<c.length;b++){if(c[b].type=="text"){clearDateFromDateFormat(c[b],a);return}}}}function clearDateFromDateFormat(b,a){if(b.value!=null&&b.value.toUpperCase()==a.toUpperCase()){clearField(b)}}function clearField(a){if(a){a.value="";a.className=""}}function getIframeObj(){if(calendarIframe==null||typeof(calendarIframe)=="undefined"){calendarIframe=document.getElementById("calendar1")}}function getLocalDate(date,dateFormat){var DD=date.getDate();var MM=date.getMonth()+1;if(MM<10){MM="0"+MM}if(DD<10){DD="0"+DD}var YYYY=date.getFullYear();var dateSeparator,returnString;dateFormat=dateFormat.toUpperCase();var month=dateFormat.indexOf("MM");var day=dateFormat.indexOf("DD");dateSeparator=(month>0?dateFormat.substr(month-1,1):dateSeparator=dateFormat.substr(day-1,1));formatArray=dateFormat.split(dateSeparator);returnString=eval(formatArray[0])+dateSeparator+eval(formatArray[1])+dateSeparator+eval(formatArray[2]);return returnString}function getLocalTime(a,g){var d=a.getHours();var f=a.getMinutes();var c=a.getSeconds();if(d<10){d="0"+d}if(f<10){f="0"+f}if(c<10){c="0"+c}g=g.toUpperCase();var b=0;var e=new Array();if(g.indexOf(" A")>0&&d>12){e[b++]=d-12}else{e[b++]=d}e[b++]=":";e[b++]=f;if(g.indexOf(":SS")>0){e[b++]=":";e[b++]=c}if(g.indexOf(" A")>0){if(d>12){e[b++]=" PM"}else{e[b++]=" AM"}}return e.join("")}function initCalendarEvents(){$("body").click(function(a){if(isIE7||isIE8){window.onbeforeunload=null}if($(a.target).closest("#calendar1").size()>0){return}if($(a.target).closest(".calendarPan").size()>0){getIframeObj();if(calendarIframe.style.display!="none"){return}}if(typeof hideCalendar!="undefined"){hideCalendar()}return})}$(function(){initCalendarEvents();if(isIE9||isIE10){skipDisableButtons=true}});function calendartabEvent(b){genWindowEvent(b);var a=window.event.keyCode;if(a==9){hideCalendar()}return true};